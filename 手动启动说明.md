# ChainMakes 手动启动说明

本文档提供详细的手动启动步骤，适用于自动启动脚本无法正常工作的情况。

---

## 🚀 推荐方式：使用启动脚本

### 方法1：分步启动（最稳定）

**步骤1：启动后端**
```
双击运行: 启动后端.bat
```
- 等待看到 `Uvicorn running on http://127.0.0.1:8000`
- ⚠️ **不要关闭此窗口**

**步骤2：启动前端**
```
双击运行: 启动前端.bat
```
- 等待看到 `Local: http://localhost:3333/`
- ⚠️ **不要关闭此窗口**

**步骤3：访问系统**
- 打开浏览器访问: http://localhost:3333
- 使用默认账户登录：
  - 用户名: `admin`
  - 密码: `admin123`

---

## 📝 方法2：手动命令行启动

如果启动脚本无法运行，请按以下步骤手动启动。

### 第一步：启动后端

1. **打开命令提示符**
   - 按 `Win + R`
   - 输入 `cmd`
   - 按回车

2. **进入后端目录**
   ```cmd
   cd /d E:\down\网站源码\AI帮写的代码\chainmakes\backend
   ```

3. **激活虚拟环境**
   ```cmd
   venv\Scripts\activate.bat
   ```
   
   > 成功后命令提示符前会显示 `(venv)`

4. **启动后端服务**
   ```cmd
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
   ```

5. **验证启动成功**
   - 看到 `Uvicorn running on http://127.0.0.1:8000`
   - 看到 `Application startup complete`
   - ⚠️ **保持此窗口打开**

---

### 第二步：启动前端

1. **打开新的命令提示符**
   - 再次按 `Win + R`
   - 输入 `cmd`
   - 按回车

2. **进入前端目录**
   ```cmd
   cd /d E:\down\网站源码\AI帮写的代码\chainmakes\frontend
   ```

3. **启动前端服务**
   ```cmd
   pnpm dev
   ```

4. **验证启动成功**
   - 看到 `Local: http://localhost:3333/`
   - 看到 `ready in XXX ms`
   - ⚠️ **保持此窗口打开**

---

### 第三步：访问系统

1. **打开浏览器**
   - 推荐使用 Chrome / Edge / Firefox

2. **访问地址**
   - 前端界面: http://localhost:3333
   - 后端API: http://localhost:8000
   - API文档: http://localhost:8000/docs

3. **登录系统**
   - 用户名: `admin`
   - 密码: `admin123`
   - ⚠️ 首次登录后请修改密码

---

## 🔧 常见问题与解决方案

### 问题1：虚拟环境不存在

**错误提示**:
```
'venv\Scripts\activate.bat' 不是内部或外部命令
```

**解决方法**:
```cmd
cd backend
python -m venv venv
venv\Scripts\activate.bat
pip install -r requirements.txt
```

---

### 问题2：pnpm命令未找到

**错误提示**:
```
'pnpm' 不是内部或外部命令
```

**解决方法**:
```cmd
# 安装pnpm
npm install -g pnpm

# 进入前端目录安装依赖
cd frontend
pnpm install
```

---

### 问题3：端口被占用

**错误提示**:
```
Address already in use
Error: listen EADDRINUSE: address already in use :::8000
```

**查找占用进程**:
```cmd
# 查看8000端口占用
netstat -ano | findstr :8000

# 查看3333端口占用
netstat -ano | findstr :3333
```

**结束占用进程**:
```cmd
# 使用查到的PID结束进程
taskkill /F /PID <进程ID>

# 例如: taskkill /F /PID 12345
```

---

### 问题4：后端启动后立即退出

**可能原因**:
- 数据库文件损坏
- 配置错误
- 依赖包缺失

**解决方法**:
```cmd
cd backend

# 检查虚拟环境
venv\Scripts\activate.bat

# 重新安装依赖
pip install -r requirements.txt

# 检查数据库目录
dir

# 重新初始化数据库（如果需要）
python init_db.py
```

---

### 问题5：前端启动失败或很慢

**解决方法**:
```cmd
cd frontend

# 清理缓存
rmdir /s /q node_modules
rmdir /s /q dist
del /f /q pnpm-lock.yaml

# 重新安装
pnpm install

# 启动
pnpm dev
```

---

### 问题6：Python版本不正确

**检查Python版本**:
```cmd
python --version
```

应该显示 `Python 3.11.x` 或更高版本

**如果版本不对**:
- 下载安装 Python 3.11+ from https://www.python.org/
- 安装时勾选 "Add Python to PATH"
- 重启命令提示符

---

### 问题7：Node.js版本不正确

**检查Node.js版本**:
```cmd
node --version
```

应该显示 `v18.x.x` 或更高版本

**如果版本不对**:
- 下载安装 Node.js 18+ from https://nodejs.org/
- 安装后重启命令提示符

---

## 💡 使用PowerShell（备选方案）

### 启动后端
```powershell
cd E:\down\网站源码\AI帮写的代码\chainmakes\backend
.\venv\Scripts\Activate.ps1
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### 启动前端
```powershell
cd E:\down\网站源码\AI帮写的代码\chainmakes\frontend
pnpm dev
```

> **注意**: 如果PowerShell提示脚本执行策略错误，以管理员身份运行：
> ```powershell
> Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
> ```

---

## ✅ 验证服务是否正常

### 测试后端
```cmd
curl http://localhost:8000/health
```
应该返回: `{"status":"healthy"}`

### 测试前端
浏览器访问: http://localhost:3333
应该看到登录页面

---

## 🛑 停止服务

### 方法1：直接关闭窗口
- 直接关闭运行后端和前端的CMD窗口

### 方法2：使用Ctrl+C
- 在运行服务的CMD窗口中按 `Ctrl + C`
- 确认终止批处理操作

### 方法3：强制结束进程
```cmd
# 结束所有Python进程（慎用）
taskkill /F /IM python.exe

# 结束特定端口的进程
for /f "tokens=5" %a in ('netstat -ano ^| findstr :8000') do taskkill /F /PID %a
for /f "tokens=5" %a in ('netstat -ano ^| findstr :3333') do taskkill /F /PID %a
```

---

## 📊 日志查看

### 后端日志
- 实时查看: 在后端CMD窗口查看
- 日志文件: `backend/logs/` 目录（如果配置了文件日志）

### 前端日志
- 浏览器控制台: 按 `F12` 打开开发者工具
- 命令行窗口: 在前端CMD窗口查看

---

## 🔍 健康检查

### 检查后端状态
```cmd
curl http://localhost:8000/
curl http://localhost:8000/health
```

### 检查API文档
浏览器访问: http://localhost:8000/docs

### 检查前端
浏览器访问: http://localhost:3333

---

## 📚 相关文档

- [快速启动指南](快速启动指南.txt) - 最简单的启动方式
- [README.md](README.md) - 项目总览
- [DEPLOYMENT_README.md](DEPLOYMENT_README.md) - 部署指南
- [API文档](docs/API_DOCUMENTATION.md) - API接口说明

---

## 💬 需要帮助？

如果以上方法都无法解决问题：

1. **检查系统要求**
   - Windows 10/11
   - Python 3.11+
   - Node.js 18+
   - pnpm 8+

2. **查看完整错误信息**
   - 不要关闭错误窗口
   - 截图或复制完整错误信息

3. **查看项目文档**
   - 查看 `docs/` 目录下的其他文档
   - 查看 `NEXT_STEPS.md` 了解项目状态

4. **提交Issue**
   - 描述问题和错误信息
   - 说明已尝试的解决方法
   - 附上系统环境信息

---

**最后更新**: 2025-10-06