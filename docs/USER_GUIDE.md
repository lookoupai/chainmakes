
# ChainMakes 用户使用手册

欢迎使用 ChainMakes 加密货币价差套利交易机器人系统！本手册将帮助您快速上手并充分利用系统的各项功能。

---

## 📋 目录

1. [系统概述](#系统概述)
2. [快速开始](#快速开始)
3. [交易所管理](#交易所管理)
4. [交易机器人](#交易机器人)
5. [实时监控](#实时监控)
6. [策略配置](#策略配置)
7. [风险管理](#风险管理)
8. [常见问题](#常见问题)

---

## 系统概述

### 什么是价差套利？

价差套利是一种利用不同市场或交易对之间的价格差异来获取利润的交易策略。ChainMakes 通过实时监控两个交易对的价差变化，在价差达到预设条件时自动执行买卖操作。

### 核心功能

- **多交易所支持**: OKX、Binance、Mock模拟交易所
- **智能交易机器人**: 自动监控价差并执行交易
- **DCA策略**: 定投策略，分批建仓降低风险
- **实时监控**: WebSocket推送实时数据
- **风险控制**: 止损、止盈、最大持仓限制
- **安全可靠**: API密钥加密存储

---

## 快速开始

### 第一步：登录系统

1. 访问 http://localhost:3333
2. 使用默认账户登录：
   - 用户名: `admin`
   - 密码: `admin123`
3. **重要**: 登录后立即修改密码

### 第二步：添加交易所账户

1. 进入"交易所管理"页面
2. 点击"添加交易所账户"按钮
3. 选择交易所类型（建议先使用Mock模拟交易所）
4. 填写API信息（Mock交易所可随意填写）
5. 点击"测试连接"验证配置
6. 保存交易所账户

### 第三步：创建第一个机器人

1. 进入"机器人管理"页面
2. 点击"创建机器人"按钮
3. 填写基本信息：
   - 机器人名称：如"BTC-ETH套利测试"
   - 选择交易所账户
   - 市场1：BTC-USDT
   - 市场2：ETH-USDT
4. 配置策略参数（可使用默认值）
5. 点击"创建"按钮

### 第四步：启动机器人

1. 在机器人列表中找到刚创建的机器人
2. 点击右侧的下拉菜单
3. 选择"启动"
4. 系统将开始监控价差并自动交易

---

## 交易所管理

### 支持的交易所

#### Mock 模拟交易所
- **用途**: 测试和学习
- **特点**: 无需真实API密钥，模拟真实交易环境
- **推荐**: 初次使用建议先用Mock交易所熟悉系统

#### OKX 交易所
- **用途**: 真实交易
- **要求**: 需要有效的API Key、Secret和Passphrase
- **注意**: 需要网络代理才能访问（国内环境）

#### Binance 交易所
- **状态**: 即将支持
- **预计**: 下一版本推出

### 如何添加交易所账户

#### 添加Mock模拟交易所

1. 点击"添加交易所账户"
2. 选择交易所类型: `mock`
3. 填写任意API信息（仅用于标识）
4. 点击"测试连接"（应该显示成功）
5. 点击"添加"保存

#### 添加OKX真实交易所

1. 登录OKX交易所网站
2. 进入API管理页面
3. 创建新的API密钥：
   - 备注名称：ChainMakes交易机器人
   - 权限：勾选"读取"和"交易"（不要勾选"提现"）
   - IP白名单：添加服务器IP（可选但推荐）
   - 设置Passphrase并记录
4. 复制API Key和Secret
5. 在ChainMakes中添加：
   - 交易所类型：`okx`
   - 粘贴API Key
   - 粘贴API Secret
   - 输入Passphrase
6. 点击"测试连接"验证
7. 保存账户

### 管理交易所账户

#### 编辑账户
- 点击账户卡片的下拉菜单
- 选择"编辑"
- 修改API信息
- 保存更改

#### 启用/禁用账户
- 点击账户卡片的下拉菜单
- 选择"启用"或"禁用"
- 禁用的账户无法创建新机器人

#### 删除账户
- 点击账户卡片的下拉菜单
- 选择"删除"
- 确认删除操作
- ⚠️ 注意：删除前请先停止所有使用该账户的机器人

---

## 交易机器人

### 机器人工作原理

1. **监控价差**: 实时获取两个交易对的价格
2. **计算价差**: 计算价差百分比
3. **判断开仓**: 当价差超过阈值时开仓
4. **持仓管理**: 根据价差变化加仓或减仓
5. **平仓操作**: 价差回归时平仓获利

### 创建机器人

#### 基本配置

| 参数 | 说明 | 示例 |
|------|------|------|
| 机器人名称 | 唯一标识 | BTC-ETH套利 |
| 交易所账户 | 使用的交易所 | Mock交易所 |
| 市场1交易对 | 第一个交易对 | BTC-USDT |
| 市场2交易对 | 第二个交易对 | ETH-USDT |
| 启动时间 | 开始运行时间 | 立即启动 |

#### 策略参数

| 参数 | 说明 | 建议值 | 范围 |
|------|------|--------|------|
| 杠杆倍数 | 交易杠杆 | 5-10倍 | 1-20倍 |
| 每单投资金额 | 单次开仓金额 | 100 USDT | 根据资金量 |
| 最大持仓价值 | 持仓上限 | 1000 USDT | 资金的30-50% |
| 最大DCA次数 | 最多加仓次数 | 6次 | 3-10次 |

#### DCA配置（定投策略）

DCA (Dollar Cost Averaging) 是一种分批建仓的策略，可以降低市场波动风险。

**配置示例**:
```json
[
  {"times": 1, "spread": 1.0, "multiplier": 1.0},
  {"times": 2, "spread": 2.0, "multiplier": 2.0},
  {"times": 3, "spread": 3.0, "multiplier": 3.0}
]
```

**参数说明**:
- `times`: 第几次加仓
- `spread`: 触发加仓的价差阈值（%）
- `multiplier`: 相对于首次投资的倍数

**工作流程**:
1. 价差达到1%时，投资100 USDT（1倍）
2. 价差扩大到2%时，再投资200 USDT（2倍）
3. 价差继续扩大到3%时，再投资300 USDT（3倍）

#### 盈利模式

**Position模式（推荐）**:
- 以持仓为单位计算盈利
- 每个持仓独立计算止盈
- 适合大部分场景

**Overall模式**:
- 以总体盈亏计算
- 所有持仓合并计算
- 适合长期策略

#### 止盈止损

| 参数 | 说明 | 建议值 |
|------|------|--------|
| 盈利比例 | 触发止盈的比例 | 1.0% |
| 止损比例 | 触发止损的比例 | 10.0% |

---

### 管理机器人

#### 启动机器人
1. 在机器人列表找到目标机器人
2. 点击右侧下拉菜单
3. 选择"启动"
4. 确认启动

#### 暂停机器人
- 暂停后不再监控价差
- 保留当前持仓
- 可随时恢复运行

#### 停止机器人
- 完全停止运行
- 建议先平掉所有持仓
- 数据会被保留

#### 删除机器人
- 永久删除机器人及其数据
- ⚠️ 操作不可恢复
- 删除前必须先停止

---

## 实时监控

### 机器人详情页

点击机器人名称进入详情页，可以查看：

#### 1. 基本信息
- 运行状态
- 创建时间
- 最后更新时间
- 总收益统计

#### 2. 实时价差
- 当前价差百分比
- 价差变化趋势图
- 历史价差数据

#### 3. 持仓情况
- 当前持仓列表
- 每个持仓的：
  - 开仓时间
  - 持仓方向
  - 持仓数量
  - 未实现盈亏
  - 盈亏百分比

#### 4. 订单历史
- 所有历史订单
- 订单类型（开多/开空/平仓）
- 成交价格
- 成交时间
- 订单状态

### WebSocket实时推送

系统通过WebSocket实时推送以下数据：

- ✅ 机器人状态变化
- ✅ 价差实时更新
- ✅ 持仓变化
- ✅ 新订单通知
- ✅ 系统消息

**连接状态**:
- 🟢 已连接：正常接收实时数据
- 🔴 已断开：数据更新可能延迟

---

## 策略配置

### 保守型策略

适合：新手、小资金、低风险偏好

```
杠杆倍数: 3-5倍
每单投资: 50-100 USDT
最大持仓: 500-1000 USDT
最大DCA次数: 3-5次
盈利比例: 0.5-1.0%
止损比例: 5.0%
```

### 稳健型策略

适合：有经验、中等资金、平衡风险

```
杠杆倍数: 5-10倍
每单投资: 100-200 USDT
最大持仓: 1000-2000 USDT
最大DCA次数: 5-7次
盈利比例: 1.0-1.5%
止损比例: 8.0%
```

### 激进型策略

适合：专业交易员、大资金、高风险承受

```
杠杆倍数: 10-20倍
每单投资: 200-500 USDT
最大持仓: 2000-5000 USDT
最大DCA次数: 7-10次
盈利比例: 1.5-2.0%
止损比例: 10.0%
```

### 策略优化建议

1. **从小额开始**: 先用小资金测试策略
2. **观察数据**: 运行一段时间后分析数据
3. **逐步调整**: 根据实际表现微调参数
4. **分散风险**: 不要把所有资金投入一个机器人
5. **定期复盘**: 每周检查收益和风险指标

---

## 风险管理

### 资金管理原则

1. **不要过度杠杆**
   - 建议杠杆不超过10倍
   - 高杠杆=高风险

2. **控制总持仓**
   - 单个机器人持仓不超过总资金的50%
   - 保留足够的保证金

3. **分散投资**
   - 创建多个机器人
   - 使用不同的交易对
   - 降低单点风险

4. **设置止损**
   - 必须设置合理的止损比例
   - 严格执行止损规则

### 风险提示

⚠️ **加密货币交易风险**
- 价格波动剧烈
- 可能造成全部本金损失
- 过往收益不代表未来表现

⚠️ **技术风险**
- 网络延迟可能影响交易
- 系统故障可能导致损失
- API限制可能影响操作

⚠️ **市场风险**
- 极端行情可能触发强平
- 
流动性不足可能无法成交
- 价差快速变化可能导致损失

### 安全建议

1. **API密钥安全**
   - 不要授予提现权限
   - 设置IP白名单
   - 定期更新密钥

2. **账户安全**
   - 使用强密码
   - 定期修改密码
   - 不要分享账户

3. **操作安全**
   - 在测试环境充分验证
   - 小额资金开始
   - 逐步增加投资

---

## 常见问题

### Q1: 如何选择合适的交易对？

**建议**:
- 选择流动性好的主流币种
- 避免小市值币种
- 考虑交易费用

**推荐组合**:
- BTC-USDT / ETH-USDT
- BTC-USDT / BNB-USDT
- ETH-USDT / SOL-USDT

### Q2: DCA策略如何配置？

**原则**:
- 价差阈值递增
- 投资倍数递增
- 总次数3-7次

**示例**:
```json
[
  {"times": 1, "spread": 0.5, "multiplier": 1.0},
  {"times": 2, "spread": 1.0, "multiplier": 1.5},
  {"times": 3, "spread": 1.5, "multiplier": 2.0},
  {"times": 4, "spread": 2.0, "multiplier": 2.5}
]
```

### Q3: 机器人为什么不交易？

**可能原因**:
1. 价差未达到开仓阈值
2. 已达到最大持仓限制
3. 账户余额不足
4. 机器人未启动
5. 交易所API连接失败

**解决方法**:
- 检查机器人状态
- 查看价差数据
- 检查账户余额
- 查看系统日志

### Q4: 如何优化收益？

**方法**:
1. **优化参数** - 根据历史数据调整阈值
2. **选择时机** - 避开极端行情
3. **分散策略** - 多个交易对和机器人

### Q5: Mock交易所和真实交易所有什么区别？

| 特性 | Mock交易所 | 真实交易所 |
|------|-----------|-----------|
| 用途 | 测试学习 | 真实交易 |
| 需要API | 否 | 是 |
| 真实资金 | 否 | 是 |
| 价格数据 | 模拟生成 | 真实市场 |

**建议**: 先在Mock环境熟悉系统，验证策略后再使用真实交易所。

---

## 最佳实践

### 初始设置

✅ **第一周**: 使用Mock交易所，测试所有功能
✅ **第二周**: 小额真实资金测试
✅ **第三周开始**: 逐步增加投资

### 日常运营

**每日检查**:
- 机器人运行状态
- WebSocket连接状态
- 账户余额充足
- 无异常订单

**每周复盘**:
- 总收益统计
- 成功交易分析
- 参数优化调整

---

**最后更新**: 2025-10-06