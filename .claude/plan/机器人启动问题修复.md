# 机器人启动问题修复 - 执行计划

## 任务上下文
基于 `docs/DEVELOPMENT_PROGRESS_2025-10-06.md` 分析，项目当前存在机器人启动问题，主要是 Python 缓存导致使用旧代码，以及异步任务创建可能失败的问题。

## 解决方案选择
采用**方案 1：渐进式修复与验证**，风险最低且便于问题诊断。

## 详细执行步骤

### 步骤 1：清理 Python 缓存并重启后端（5分钟）
- 清理 backend/ 目录下的所有 __pycache__ 和 .pyc 文件
- 停止所有 Python 进程
- 重新启动后端服务（非 reload 模式）

### 步骤 2：添加 BotManager 层调试日志（10分钟）
修改 `backend/app/services/bot_manager.py`，在 start_bot() 方法中添加详细日志。

### 步骤 3：添加 BotEngine 层调试日志（10分钟）
修改 `backend/app/core/bot_engine.py`，在 start() 和 _run() 方法中添加日志。

### 步骤 4：添加 BotService 层调试日志（5分钟）
修改 `backend/app/services/bot_service.py`，在 start_bot() 方法中添加日志。

### 步骤 5：运行测试脚本验证修复（5分钟）
执行 `python scripts/test_bot_start.py` 验证修复效果。

### 步骤 6：清理调试日志（可选，5分钟）
移除调试日志，恢复生产状态。

## 预期结果
- 后端无 ImportError 异常
- 测试脚本成功运行
- WebSocket 正常推送数据
- current_cycle > 0 且持续增长

## 验证标准
技术指标：机器人启动无400错误，实时数据推送正常，交易循环正常执行。